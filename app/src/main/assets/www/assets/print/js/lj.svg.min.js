var SVGHEIGHT=0,SVGWIDTH=0,minScale=0,maxWalkingScale=1,maxScale=2,translate,scale,width,height,RESET,RESET_SCALE,ZOOM_SCALE,CURRENT_ZOOM,ZOOM_INCREMENT,BBOX_PADDING,ZoomType;ZOOM_INCREMENT=1;var X_SCALE=0,PIXEL_X_SCALE=0;BBOX_PADDING=20;var BoxSize=0,zm=d3.behavior.zoom().scaleExtent([minScale,maxScale]).on("zoom",zoom),margin={top:0,right:0,bottom:0,left:0};width=GetWidth()-margin.left-margin.right;var AREA=height=GetHeight()-margin.top-margin.bottom,ASPECT_RATIO=width/height;
function zoom(){if(zm.translate()&&(zm.scale()||0==zm.scale())){var a=zm.translate(),b=zm.scale();CURRENT_ZOOM=b;b>=minScale&&b<=maxScale&&(a[0]&&a[1]?mainVM.ljdirectionsVM.svg.attr("transform","translate("+a[0]+","+a[1]+") scale("+b+")"):(a=$("svg#mainSVG g")[0].attributes[0].value.split("scale")[0],mainVM.ljdirectionsVM.svg.attr("transform",a+" scale("+b+")")),setSlider(b))}}
function setSlider(a){X_SCALE=-35+75*(maxScale-a)/(maxScale-minScale);d3.select("#slidemover").attr("transform","translate( "+X_SCALE+" ,0)")}
function getBoundingBox(a,b,d,c,k){a.split(" ").join(" ").split(",").join(" ").split(" ");var e=a.split(" "),f,h;for(a=0;a<e.length;a++){var g=e[a].split(",");0==a?(f=g[0],h=g[1]):(f=f+" "+g[0],h=h+" "+g[1])}e=f.split(" ");f=h.split(" ");for(a=0;a<e.length;a++)e[a]=parseInt(e[a]);for(a=0;a<f.length;a++)f[a]=parseInt(f[a]);g=Math.max.apply(Math,e);h=Math.min.apply(Math,e);var l=Math.max.apply(Math,f);a=Math.min.apply(Math,f);f=(g+h)/2;e=(l+a)/2;width=b?b:$("#SVGBox").width()?$("#SVGBox").width():$("#map_canvas").width();
height=d?d:$("#SVGBox").height()?$("#SVGBox").height():$("#map_canvas").height();width=width*(100-BBOX_PADDING)/100;height=height*(100-BBOX_PADDING)/100;c&&(width+=width*c/100/2,height+=height*c/100/2);ASPECT_RATIO=width/height;c=g-h;g=l-a;MAP_WIDTH=c;MAP_HEIGHT=g;ZOOM_SCALE=zm.scale();k&&(ZOOM_SCALE=Math.min(width/c,height/g));ZOOM_SCALE>maxScale&&(ZOOM_SCALE=maxScale);ZOOM_SCALE<minScale&&(ZOOM_SCALE=minScale);320>b&&(320>d&&ZOOM_SCALE>maxWalkingScale)&&(ZOOM_SCALE=maxWalkingScale);b=ZOOM_SCALE;
d=h*b-(width*BBOX_PADDING/2/100+width/2-c*b/2);k=a*b-(height*BBOX_PADDING/2/100+height/2-g*b/2);var l=Math.ceil(3/(b?b:1)),m=Math.ceil(2*l),n=Math.ceil(0.9*m);3>l&&(l=3);10>m&&(m=10);9>n&&(n=9);return[d,k,h,a,c,g,b,f,e,l,m,n]}
function getBoundingBoxForVML(a,b,d){width=b?b:$("#SVGBox").width()?$("#SVGBox").width():$("#map_canvas").width();height=d?d:$("#SVGBox").height()?$("#SVGBox").height():$("#map_canvas").height();var c=width,k=height;width=width*(100-BBOX_PADDING)/100;height=height*(100-BBOX_PADDING)/100;var e=width*BBOX_PADDING/2/100+width/2-a[4]*a[6]/2,f=height*BBOX_PADDING/2/100+height/2-a[5]*a[6]/2,h=a[2]-e,g=a[3]-f,e=a[2]+a[4]+e-h;a=a[3]+a[5]+f-g;c=Math.min(c/e,k/a);c>maxScale&&(c=maxScale);c<minScale&&(c=minScale);
320>b&&(320>d&&c>maxWalkingScale)&&(c=maxWalkingScale);b=Math.ceil(3/(c?c:1));d=Math.ceil(2*b);k=Math.ceil(0.9*d);3>b&&(b=3);10>d&&(d=10);9>k&&(k=9);return[h,g,e,a,c,b,d,k]}
function getBoundingBoxForZoom(a,b,d,c,k){Yshift=20;width=b?b:$("#SVGBox").width()?$("#SVGBox").width():$("#map_canvas").width();height=d?d:$("#SVGBox").height()?$("#SVGBox").height():$("#map_canvas").height();width=width*(100-BBOX_PADDING)/100*BBOX_PADDING/2/100;height=height*(100-BBOX_PADDING)/100*BBOX_PADDING/2/100;a=getBoundingBox(a,b,d);b=zm.scale();b=1==c?b+0.1:0==c?b-0.1:k||b;b<minScale?b=minScale:b>maxScale&&(b=maxScale);b>=minScale&&b<=maxScale&&(a[0]=a[7]*b-width/2-50*b,a[1]=a[8]*b-height/
2-Yshift*b,a[6]=b);return a}function GetWidth(){var a=0;$("#SVGBox").width()?a=$("#SVGBox").width():$("#map_canvas").width()?a=$("#map_canvas").width():self.innerHeight?a=self.innerWidth:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientWidth:document.body&&(a=document.body.clientWidth);return a}
function GetHeight(){var a=0;$("#SVGBox").height()?a=$("#SVGBox").height():$("#map_canvas").height()?a=$("#map_canvas").height():self.innerHeight?a=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&(a=document.body.clientHeight);return a}function dropHandler(a){}
function dragmove(a){a.x+=d3.event.dx;40<a.x&&(a.x=40);-35>a.x&&(a.x=-35);if(40>=a.x&&-35<=a.x){var b=(minScale+maxScale)*(40-a.x)/75,b=getBoundingBoxForZoom(mainVM.ljdirectionsVM.currentFileObject.pathpoints,$("#SVGBox").width(),$("#SVGBox").height(),-1,b);zm.translate([-b[0],-b[1]]).scale(b[6]);zoom();PIXEL_X_SCALE=a.x}}
function DrawControls(){ZoomType=X_SCALE=BoxSize=0;if(!1=="ontouchstart"in window.document){var a=d3.behavior.drag().on("drag",dragmove).on("dragend",dropHandler);d3.select("#gZoom").remove();var b=d3.select("#mainSVG").append("g").attr("transform"," translate(20, 20)").attr("id","gZoom"),b=b.append("g").attr("id","SliderCnt"),d=b.append("g").attr("id","controlzone"),c=b.append("g").attr("class","rollover");b.append("rect").attr("id","bkpanel").attr("x","-10").attr("y","-5").attr("width","50").attr("height",
"150").attr("fill","none").on("mousedown.drag",null);c.append("svg:circle").attr("id","minus").attr("r","15").attr("cx",10).attr("cy",10).attr("fill","#2A9FDA").attr("stroke","#e9e9e9").attr("stroke-width","1");c.on("mousedown",function(){var a=zm.scale();BoxSize=0;a-0.1>=minScale&&a-0.1<=maxScale&&(a=getBoundingBoxForZoom(mainVM.ljdirectionsVM.currentFileObject.pathpoints,$("#SVGBox").width(),$("#SVGBox").height(),0),zm.translate([-a[0],-a[1]]).scale(a[6]),zoom())});c.on("dblclick",function(){event.cancelBubble=
!0;try{event.stopPropagation()}catch(a){}return!1});c.append("svg:line").attr("x1",2).attr("x2",17).attr("y1",10).attr("y2",10).attr("stroke","#fff").attr("stroke-width","2");d.append("svg:line").attr("x1","9.5").attr("x2","9.5").attr("y1","20").attr("y2","120").attr("stroke","#666");d.append("svg:line").attr("x1","10.5").attr("x2","10.5").attr("y1","20").attr("y2","120").attr("stroke","#ddd");d.append("g").attr("id","slidezone").attr("transform","rotate(-90 12,65.5)").append("g").attr("id","slidemover").attr("transform",
"translate(0,0)").data([{x:0,y:0}]).call(a).append("svg:polygon").attr("id","slider").attr("focusable","true").attr("points","-1.5,55.5 10.5,55.5 10.5,69.34615325927734 4.5,75.5 -1.5,69").attr("fill","#ffffff").attr("stroke","#666");a=b.append("g").attr("class","rollover");a.append("svg:circle").attr("id","plus").attr("r","15").attr("cx",10).attr("cy",130).attr("fill","#2A9FDA").attr("stroke","#e9e9e9").attr("stroke-width","1");a.on("mousedown",function(){var a=zm.scale();BoxSize=1;a+0.1>=minScale&&
a+0.1<=maxScale&&(a=getBoundingBoxForZoom(mainVM.ljdirectionsVM.currentFileObject.pathpoints,$("#SVGBox").width(),$("#SVGBox").height(),1),zm.translate([-a[0],-a[1]]).scale(a[6]),zoom())});a.on("dblclick",function(){event.cancelBubble=!0;try{event.stopPropagation()}catch(a){}return!1});a.append("svg:line").attr("x1","2").attr("x2","17").attr("y1","130").attr("y2","130").attr("stroke","#fff").attr("stroke-width","2");a.append("svg:line").attr("x1","10").attr("x2","10").attr("y1","123").attr("y2","137").attr("stroke",
"#fff").attr("stroke-width","2");a=b.append("g").attr("class","rollover");a.append("svg:circle").attr("id","reset").attr("r","15").attr("cx",10).attr("cy",164).attr("fill","#2A9FDA").attr("stroke","#e9e9e9").attr("stroke-width","1");a.append("svg:path").attr("d","m10.00197,155c-2.99438,0 -5.22321,0.98152 -6.95624,3.80855l-2.04573,-0.98151l0.46114,5.38576l5.15313,-2.69363l-1.92819,-0.92389c1.12873,-1.93193 3.1707,-2.8513 4.94592,-2.8513c3.95885,0 8.07593,3.32347 7.73158,8.42276c-0.26824,3.97375 -3.55422,6.88342 -7.51307,6.88342c-1.5213,0 -2.93033,-0.47827 -4.09071,-1.29074l-1.60644,0.95346c1.60117,1.29529 3.63409,2.07216 5.84785,2.07216c5.15766,0 9.33878,-4.20569 9.33878,-9.39363s-4.18038,-9.39136 -9.33803,-9.39136l0,-0.00003l0.00001,-0.00002z").attr("fill",
"#ffffff");a.on("mousedown",function(){0==RESET[0]&&0==RESET[1]&&0==RESET_SCALE?mainVM.ljdirectionsVM.resizeSVG():(mainVM.ljdirectionsVM.svg.attr("transform","translate( "+RESET[0]+","+RESET[1]+")scale("+RESET_SCALE+")"),zm.translate([RESET[0],RESET[1]]),zm.scale(RESET_SCALE),zoom())});a.on("dblclick",function(){event.cancelBubble=!0;try{event.stopPropagation()}catch(a){}return!1})}else navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)?(d3.select("#gReset").remove(),a=d3.select("#mainSVG").append("g").attr("transform",
" translate(-9, 0)").attr("id","gReset")):(d3.select("#gZoomIn").remove(),b=d3.select("#mainSVG").append("g").attr("transform"," translate(-10, 0)").attr("id","gZoomIn"),a=b.append("g").attr("id","Zoomin"),a.append("svg:path").attr("d","M49.408,15.021c-10.784,0-19.525,8.742-19.525,19.525c0,10.784,8.742,19.525,19.525,19.525c10.783,0,19.525-8.741,19.525-19.525C68.934,23.764,60.191,15.021,49.408,15.021z M49.408,52.221c-9.76,0-17.672-7.913-17.672-17.674c0-9.76,7.912-17.672,17.672-17.672s17.673,7.912,17.673,17.672C67.081,44.308,59.168,52.221,49.408,52.221z").style("fill",
"#ffffff"),a.append("svg:path").attr("d","M49.408,16.875c-9.76,0-17.672,7.912-17.672,17.672c0,9.761,7.912,17.674,17.672,17.674s17.673-7.913,17.673-17.674C67.081,24.787,59.168,16.875,49.408,16.875z M61.754,37H51.428v10.289H48V37H37.495v-3.428H48V23.029h3.428v10.543h10.326V37z").attr("style","fill:#2A9FDA"),a.append("svg:polygon").attr("points","48,37 48,47.289 51.428,47.289 51.428,37 61.754,37 61.754,33.572 51.428,33.572 51.428,23.029 48,23.029 48,33.572 37.495,33.572 37.495,37").attr("fill","#ffffff"),
a.on("touchend",function(){var a=zm.scale();a+0.1>=minScale&&a+0.1<=maxScale&&(BoxSize-=5,a=getBoundingBoxForZoom(mainVM.ljdirectionsVM.currentFileObject.pathpoints,$("#SVGBox").width(),$("#SVGBox").height(),1),zm.translate([-a[0],-a[1]]).scale(a[6]),zoom())}),d3.select("#gZoomOut").remove(),a=d3.select("#mainSVG").append("g").attr("transform"," translate(-5, 45)").attr("id","gZoomOut").append("g").attr("id","Zoomout"),a.append("svg:path").attr("d","M44.408,11.881c-10.835,0-19.619,8.784-19.619,19.618c0,10.836,8.784,19.619,19.619,19.619c10.835,0,19.619-8.783,19.619-19.619C64.027,20.666,55.244,11.881,44.408,11.881z M44.409,49.172c-9.76,0-17.673-7.912-17.673-17.673c0-9.76,7.913-17.672,17.673-17.672c9.76,0,17.671,7.912,17.671,17.672C62.08,41.26,54.168,49.172,44.409,49.172z").attr("fill",
"#ffffff"),a.append("svg:path").attr("d","M44.409,13.828c-9.76,0-17.673,7.912-17.673,17.672c0,9.761,7.913,17.673,17.673,17.673c9.76,0,17.671-7.912,17.671-17.673C62.08,21.74,54.168,13.828,44.409,13.828z M56.754,33.953H32.495v-3.428h24.259V33.953z").attr("fill","#2A9FDA"),a.append("rect").attr({x:32.495,y:30.525,width:24.259,height:3.428}).attr("fill","#ffffff"),a.on("touchend",function(){var a=zm.scale();a+0.1>=minScale&&a+0.1<=maxScale&&(BoxSize-=5,a=getBoundingBoxForZoom(mainVM.ljdirectionsVM.currentFileObject.pathpoints,
$("#SVGBox").width(),$("#SVGBox").height(),0),zm.translate([-a[0],-a[1]]).scale(a[6]),zoom())}),d3.select("#gReset").remove(),a=d3.select("#mainSVG").append("g").attr("transform"," translate(-9, 87)").attr("id","gReset")),a=a.append("g").attr("id","Reset"),a.append("svg:path").attr("d","M47.679,11.881c-10.835,0-19.619,8.783-19.619,19.619c0,10.835,8.784,19.618,19.619,19.618c10.835,0,19.619-8.783,19.619-19.618C67.297,20.665,58.514,11.881,47.679,11.881z M47.679,49.172c-9.76,0-17.672-7.912-17.672-17.672c0-9.761,7.912-17.674,17.672-17.674S65.351,21.74,65.351,31.5C65.351,41.26,57.439,49.172,47.679,49.172z").attr("fill",
"#ffffff"),a.append("svg:path").attr("d","M47.679,13.827c-9.76,0-17.672,7.913-17.672,17.674c0,9.76,7.912,17.672,17.672,17.672S65.351,41.26,65.351,31.5C65.351,21.74,57.439,13.827,47.679,13.827z M48.169,44.11c-2.938,0-5.637-1.025-7.761-2.734l2.132-1.258c1.54,1.072,3.41,1.703,5.429,1.703c5.254,0,9.615-3.839,9.971-9.082c0.457-6.729-5.007-11.113-10.261-11.113c-2.356,0-5.066,1.213-6.564,3.762l2.559,1.219l-6.839,3.554l-0.612-7.106l2.715,1.295c2.301-3.73,5.259-5.025,9.232-5.025c6.845,0,12.394,5.549,12.394,12.394S55.014,44.11,48.169,44.11z").attr("fill",
"#2A9FDA"),a.append("svg:path").attr("d","M48.169,19.323c-3.974,0-6.932,1.295-9.232,5.025l-2.715-1.295l0.612,7.106l6.839-3.554l-2.559-1.219c1.498-2.549,4.208-3.762,6.564-3.762c5.254,0,10.718,4.385,10.261,11.113c-0.356,5.243-4.717,9.082-9.971,9.082c-2.019,0-3.889-0.631-5.429-1.703l-2.132,1.258c2.125,1.709,4.823,2.734,7.761,2.734c6.845,0,12.394-5.549,12.394-12.394S55.014,19.323,48.169,19.323z").attr("fill","#ffffff"),a.on("touchend",function(){0==RESET[0]&&0==RESET[1]&&0==RESET_SCALE?mainVM.ljdirectionsVM.resizeSVG():
(mainVM.ljdirectionsVM.svg.attr("transform","translate( "+RESET[0]+","+RESET[1]+")scale("+RESET_SCALE+")"),zm.translate([RESET[0],RESET[1]]),zm.scale(RESET_SCALE),zoom())});d3.select("#gCompass").remove();a=d3.select("#mainSVG").append("g").attr("transform"," translate("+(GetWidth()-50)+", 10)").attr("id","gCompass").append("g").attr("id","Compass");a.append("svg:path").attr("d","m13.847,0l-13.847,26.654l13.848,-5.063l14.152,5.156l-14.153,-26.747zm0,3.366l10.933,20.755l-10.933,-4.391v-16.364l0,0z").attr("fill",
"#4890CD");a.append("svg:path").attr("d","m4.943,50v-21.223h4.146l8.642,14.174v-14.174h3.959v21.223h-4.276l-8.511,-13.84v13.84h-3.96l0,0z").attr("fill","#4890CD");setSlider(zm.scale())};
//@ sourceMappingURL=lj.svg.min.js.map
